## Mongo DB



### Mongo DB의 특징

1. 유연성(Flexibility)

   * 문서 기반 저장방식을 채택함

   * 몽고DB 인스턴스 구조는 Schema-less하여 사전에 정의되지 않고, 저장되는 데이터에 적합하도록 유연하게 변형됨
   * 몽고 DB의 문서 지향 구조 때문에 중첩 문서를 만들 수 있음(key_value 구조가 연속적으로 등장할 수 있음)

3. 역정규화

   * 조인을 다소 제한적으로 지원하며 외래 키 개념이 없음
   * 함수 종속성이 존재하며 데이터 무결성이 보장되진 않지만 조회, 입력, 갱신 성능이 관계형DB에 비해 3배 이상 빠름

4.   확장성(Scalability)

   * 데이터 양과 트래픽 증가에 따라 Primary Key를 기반으로 여러 서버에 데이터를 나누는 scale-out이 가능함

5.  신뢰성(Reliability)

   * Primary와 Secondary로 구성된 ReplicaSet 구조로 고가용성을 지원하며 서버 장애에도 계속해서 동작할 수 있음

6.  다양한 Index 지원

   * 대용량 데이터를 다양한 조건으로 조회 가능

     ex) Geospatal Index: 공간내에 거리나 범위를 계산함

-> 스키마를 자주 변경해야하고 대량의 비정형 데이터를 입력하는 상황에 최적화 되어있음



### 단점

1. 복잡한 쿼리를 사용할 수 없음
2.  메모리 사용량이 커 메모리 부족 시 퍼포먼스가 급락함
3. 데이터 일관성이 보장되지 않음

### 사용 사례

* Line, Kakao 등등
* 보통 로그성 데이터나 빅데이터 중간 저장소로 쓰임



### 어떻게 여러 서버를 클라우드 환경으로 관리할까?

* Sharding(샤딩) - 데이터를 여러 몽고디비 서버에스 분산해서 저장하고 처리할 수 있또록 만들어주는 기술

응용프로그램의 코드를 많이 변경해야하는 상황이 생길 수 있음(lookup, deleteMany, updateMany)

-> 서비스가 한번 시작되면 서비스를 중단하지 않고 샤딩을 적용하기가 매우 제한적임

​	* 샤딩은 데이터를 특정 기준으로 그룹핑해서 관리하는 것으로 그 그룹을 청크라고 함

 * 모든 샤드키의 최솟값과 최댓값을 두고 청크가 그 영역을 담당하여 여러 샤드에 분산하고 관리함
   * 이때 각 청크를 어느 샤드 서버에 관리할 지는 (해시 샤딩, 레인지 샤딩)에서 사용자가 결정할 수 없음
   * 하지만 지역 기반 샤딩에선 조건을 만족하는 청크를 특정 샤드서버에만 저장하고 처리하게 할 수 있음
   * 청크는 완전히 논리적인 개념이며 물리적으로 존재하지 않음

* replica: 고가용성을 위한 기술

​	** 고가용성: 서버, 네트워크, 프로그램 등의 정보 시스템이 상당히 오랜 기간 동안 지속적으로 정상 	운영이 가능한 성질

### 기타

* MongoDB 버전과 운영체제-> 두번째 자리 숫자가 짝수이면 안정화 버전, 홀수는 개발 중인 버전



### MongoDB 클라우드



작업 정의서 느낌으로 작성





